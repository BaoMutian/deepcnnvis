<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="实时手写字符识别与深度神经网络可视化">
    <title>DeepCNN Visualization - 深度神经网络可视化</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🧠</text></svg>">
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/style.css">
    
    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    
    <!-- GSAP for animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">AI</div>
                    <span>DeepCNN Visualization</span>
                </div>
                <div class="header-status">
                    <span class="status-dot" id="status-dot"></span>
                    <span id="status-text">连接中...</span>
                </div>
            </div>
        </header>
        
        <!-- Main Content -->
        <main class="app-main">
            <div class="main-grid">
                <!-- Canvas Section -->
                <section class="canvas-section card">
                    <div class="card-header">
                        <div>
                            <h2 class="card-title">手写输入</h2>
                            <p class="card-subtitle">在画布上书写字母或数字</p>
                        </div>
                    </div>
                    <div class="card-body canvas-wrapper">
                        <div class="canvas-container" id="canvas-container">
                            <canvas id="drawing-canvas"></canvas>
                        </div>
                        <div class="canvas-controls">
                            <button class="btn btn-secondary" id="btn-clear" title="清除画布">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                                </svg>
                                清除
                            </button>
                            <button class="btn btn-secondary" id="btn-undo" title="撤销">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M3 7v6h6M3 13a9 9 0 1 0 3-7.7L3 7"/>
                                </svg>
                                撤销
                            </button>
                            <div style="flex: 1;"></div>
                            <button class="btn btn-icon btn-secondary" id="btn-settings" title="设置">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="3"/>
                                    <path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                                </svg>
                            </button>
                        </div>
                        
                        <!-- Prediction Section -->
                        <div class="prediction-section">
                            <div id="prediction-display" class="prediction-container">
                                <div class="main-prediction">
                                    <div class="prediction-char">?</div>
                                    <div class="prediction-label">等待输入</div>
                                </div>
                                <div class="top5-predictions">
                                    <div class="top5-title">可能的字符</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- 3D Visualization Section -->
                <section class="visualization-section card">
                    <div class="card-header">
                        <div>
                            <h2 class="card-title">神经网络3D可视化</h2>
                            <p class="card-subtitle">实时展示各层神经元激活状态</p>
                        </div>
                    </div>
                    <div class="card-body vis-container">
                        <div id="network-3d"></div>
                        <div class="vis-controls">
                            <button class="layer-btn active" data-layer="-1">全局视图</button>
                            <button class="layer-btn" data-layer="0">输入层</button>
                            <button class="layer-btn" data-layer="1">Stem</button>
                            <button class="layer-btn" data-layer="2">Stage 1</button>
                            <button class="layer-btn" data-layer="3">Stage 2</button>
                            <button class="layer-btn" data-layer="4">Stage 3</button>
                            <button class="layer-btn" data-layer="5">FC</button>
                            <button class="layer-btn" data-layer="6">输出</button>
                        </div>
                    </div>
                </section>
                
                <!-- Grad-CAM Section -->
                <section class="gradcam-section card">
                    <div class="card-header">
                        <div>
                            <h2 class="card-title">Grad-CAM 注意力可视化</h2>
                            <p class="card-subtitle">展示AI关注的图像区域</p>
                        </div>
                    </div>
                    <div id="gradcam-display" class="gradcam-container">
                        <div class="gradcam-images">
                            <div class="gradcam-panel gradcam-original">
                                <div class="panel-label">原始输入</div>
                                <div class="panel-image-wrapper">
                                    <img class="panel-image" id="img-original" alt="原始输入">
                                    <div class="panel-placeholder">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                            <rect x="3" y="3" width="18" height="18" rx="2"/>
                                            <circle cx="8.5" cy="8.5" r="1.5"/>
                                            <path d="M21 15l-5-5L5 21"/>
                                        </svg>
                                        <span>等待输入</span>
                                    </div>
                                </div>
                            </div>
                            <div class="gradcam-panel gradcam-heatmap">
                                <div class="panel-label">热力图</div>
                                <div class="panel-image-wrapper">
                                    <img class="panel-image" id="img-heatmap" alt="热力图">
                                    <div class="panel-placeholder">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                            <rect x="3" y="3" width="18" height="18" rx="2"/>
                                            <circle cx="8.5" cy="8.5" r="1.5"/>
                                            <path d="M21 15l-5-5L5 21"/>
                                        </svg>
                                        <span>等待输入</span>
                                    </div>
                                </div>
                            </div>
                            <div class="gradcam-panel gradcam-overlay">
                                <div class="panel-label">注意力叠加</div>
                                <div class="panel-image-wrapper">
                                    <img class="panel-image" id="img-overlay" alt="注意力叠加">
                                    <div class="panel-placeholder">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                            <rect x="3" y="3" width="18" height="18" rx="2"/>
                                            <circle cx="8.5" cy="8.5" r="1.5"/>
                                            <path d="M21 15l-5-5L5 21"/>
                                        </svg>
                                        <span>等待输入</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="gradcam-info">
                            <div class="info-item">
                                <span class="info-label">Grad-CAM</span>
                                <span class="info-desc">红色区域表示高注意力</span>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="app-footer">
            <p>DeepCNN Visualization · PyTorch + Three.js · MIT License</p>
        </footer>
    </div>
    
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner"></div>
    </div>
    
    <!-- Scripts -->
    <script src="js/canvas.js"></script>
    <script src="js/network3d.js"></script>
    <script src="js/gradcam.js"></script>
    <script src="js/main.js"></script>
</body>
</html>

